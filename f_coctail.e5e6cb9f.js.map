{"mappings":"iiBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,4PCAzD,I,EAAAC,EAAAJ,EAAA,S,aCAAK,EAAiBL,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,oFCAtHC,EAAiBR,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,WFYtH,MAAME,EAASP,KAAKC,MAAMO,aAAaC,QAAQC,EAAAC,gBAAkB,GAyB1D,SAASC,EAAiBC,EAAO,IACtC,MAAMC,EAAOD,EACVE,KAAI,EAACC,SAAEA,EAAQC,cAAEA,EAAaC,QAAEA,KACxB,mEAC0BC,EAAAb,mBAA4BW,SAAqBD,gDACjDA,wGAEaE,6FACDA,0HAG1BC,EAAAhB,6FAMpBiB,KAAK,IACRC,EAAAC,aAAaC,UAAYT,CAC3B,CAEA,SAASU,IACPH,EAAAC,aAAaC,UAAYE,EAAAC,oBAC3B,CAgCA,SAASC,IAEP,KADe3B,KAAKC,MAAMO,aAAaC,QAAQC,EAAAC,gBAAkB,IACrDiB,OAAQ,OAAOJ,GAC7B,CAlFAH,EAAAQ,cAAcC,iBAAiB,UAkE/B,SAAqBC,GACnBA,EAAEC,iBACF,MAAMC,EAAUF,EAAEG,cAAcC,OAAOC,MAAMC,OAC7C,IAAKJ,EAAS,OACd,MAAMK,EAAS/B,EAAOgC,QAAOC,GAC3BA,EAAGxB,SAASyB,cAAcC,SAAST,EAAQQ,iBAI7C,GAFApB,EAAAQ,cAAcc,SAETL,EAAOV,OAAQ,OAAQP,EAAAC,aAAaC,UAAYqB,EAAAC,SACrDjC,EAAiB0B,EACnB,IA5EAjB,EAAAC,aAAaQ,iBAAiB,SAW9BgB,eAA0Bf,GACxB,GAAyB,WAArBA,EAAEgB,OAAOC,QAAsB,OACnC,GAAIjB,EAAEgB,OAAOE,QAAQC,MAInB,OA+BJ,SAAyBC,GACvB,MAAMC,EAASpD,KAAKC,MAAMO,aAAaC,QAAQC,EAAAC,gBAAkB,GACjE,IAAK,IAAI0C,EAAI,EAAGA,EAAID,EAAOxB,OAAQyB,IACjC,GAAID,EAAOC,GAAGnC,UAAYiC,EAIxB,OAHAC,EAAOE,OAAOD,EAAG,GACjB7C,aAAa+C,QAAQ7C,EAAAC,aAAcX,KAAKwD,UAAUJ,SAClDzB,GAIN,CA5CI8B,CAAgB1B,EAAEgB,OAAOE,QAAQC,OACjCnB,EAAEgB,OAAOW,WAAWA,WAAWC,SA8CjCC,OAAS5D,KAAKC,MAAMO,aAAaC,QAAQC,EAAAC,gBAAkB,QAC3D,EAAAkD,EAAAC,gBAAeF,OAAQhD,GA3CnBmB,EAAEgB,OAAOE,QAAQc,YACb,EAAAC,EAAAC,gBAAelC,EAAEgB,OAAOE,QAAQE,GAAIpB,EAAEgB,OAAOmB,mBACvD,KAnBA,EAAAhE,EAAAiE,eACA,EAAAC,EAAAC,iBAEI9D,EAAOqB,QACT,EAAAiC,EAAAC,gBAAevD,EAAQK,GAEvBY,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-2810029b5df405e1.js","src/js/components/favourites/index.js","node_modules/@parcel/runtime-js/lib/runtime-be859e9f208c57ea.js","node_modules/@parcel/runtime-js/lib/runtime-3492125a5d253b27.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"dlfMs\\\":\\\"f_coctail.e5e6cb9f.js\\\",\\\"JQ8i3\\\":\\\"sprite.3f5ac9d6.svg\\\",\\\"eeNKI\\\":\\\"placeholder.7c12bf5f.gif\\\",\\\"kBqre\\\":\\\"f_ingredients.de08dfce.js\\\",\\\"5NH4n\\\":\\\"index.f1e23157.js\\\"}\"));","import { headerInit } from '../header';\nimport { FAV_COCKTAIL } from './fav_cocktails';\nimport sprite from '../../../images/svg/sprite.svg';\nimport { notFound } from '../error';\nimport { themeSwitcher } from '../switcher/switcher';\nimport { searchCoctById } from '../modal';\nimport { errorListFavCocktail } from '../../templates';\nimport { initPagination } from '../pagination';\nimport { refFormSearch, refCocktList, refFormSearch } from '../refs';\nimport placeholder from '../../../images/placeholder.gif';\nimport 'lazysizes';\n\nconst actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\nrefFormSearch.addEventListener('submit', searchCockt);\nrefCocktList.addEventListener('click', deleteCard);\n\nheaderInit();\nthemeSwitcher();\n\nif (actArr.length) {\n  initPagination(actArr, renderMarkupList);\n} else {\n  renderErrorMarkup();\n}\n\nasync function deleteCard(e) {\n  if (e.target.tagName !== 'BUTTON') return;\n  if (e.target.dataset.favid) {\n    deleteFavFromLS(e.target.dataset.favid);\n    e.target.parentNode.parentNode.remove();\n    reRenderCards();\n    return;\n  }\n  if (e.target.dataset.type)\n    await searchCoctById(e.target.dataset.id, e.target.nextElementSibling);\n}\n\nexport function renderMarkupList(data = []) {\n  const mark = data\n    .map(({ strDrink, strDrinkThumb, idDrink }) => {\n      return `<li class=\"coctail-card\">\n      <img class=\"img lazyload\" src=\"${placeholder}\" data-srcset=${strDrinkThumb} alt=${strDrink}/img>\n      <h3 class=\"coctail-card__name\">${strDrink}</h3>\n      <div class=\"coctail-card__options\">\n        <button class=\"button-learn_more\" data-id=${idDrink} data-type=\"learn\">Learn more</button>\n        <button class=\"button-add_to\" data-favid=${idDrink} data-add=\"add\">\n          Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>`;\n    })\n    .join('');\n  refCocktList.innerHTML = mark;\n}\n\nfunction renderErrorMarkup() {\n  refCocktList.innerHTML = errorListFavCocktail;\n}\n\nfunction deleteFavFromLS(id) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  for (let i = 0; i < actArr.length; i++) {\n    if (actArr[i].idDrink === id) {\n      actArr.splice(i, 1);\n      localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n      checkAfterDelCockt();\n      return;\n    }\n  }\n}\n\nexport function reRenderCards() {\n  newArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  initPagination(newArr, renderMarkupList);\n}\n\nfunction searchCockt(e) {\n  e.preventDefault();\n  const searchQ = e.currentTarget.finder.value.trim();\n  if (!searchQ) return;\n  const result = actArr.filter(el =>\n    el.strDrink.toLowerCase().includes(searchQ.toLowerCase())\n  );\n  refFormSearch.reset();\n\n  if (!result.length) return (refCocktList.innerHTML = notFound);\n  renderMarkupList(result);\n}\n\nfunction checkAfterDelCockt() {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  if (!actArr.length) return renderErrorMarkup();\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('dlfMs') + require('./helpers/bundle-manifest').resolve(\"JQ8i3\");","module.exports = require('./helpers/bundle-url').getBundleURL('dlfMs') + require('./helpers/bundle-manifest').resolve(\"eeNKI\");"],"names":["parcelRequire","register","JSON","parse","$e3qpK","$47436f9986320f42$exports","getBundleURL","resolve","$168a2154bc1c82be$exports","$9be2d73992d10eee$var$actArr","localStorage","getItem","$gyjzY","FAV_COCKTAIL","$9be2d73992d10eee$export$b7140f78c82be469","data","mark","map","strDrink","strDrinkThumb","idDrink","$parcel$interopDefault","join","$lnx82","refCocktList","innerHTML","$9be2d73992d10eee$var$renderErrorMarkup","$5M7hj","errorListFavCocktail","$9be2d73992d10eee$var$checkAfterDelCockt","length","refFormSearch","addEventListener","e","preventDefault","searchQ","currentTarget","finder","value","trim","result","filter","el","toLowerCase","includes","reset","$g4tMw","notFound","async","target","tagName","dataset","favid","id","actArr","i","splice","setItem","stringify","$9be2d73992d10eee$var$deleteFavFromLS","parentNode","remove","newArr","$1dj5Q","initPagination","type","$i3SOf","searchCoctById","nextElementSibling","headerInit","$fmC3e","themeSwitcher"],"version":3,"file":"f_coctail.e5e6cb9f.js.map"}