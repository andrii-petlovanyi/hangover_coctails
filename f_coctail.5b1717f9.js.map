{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,4PCAzD,I,EAAAC,EAAAJ,EAAA,S,aCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,oFCA5FC,EAAiB,IAAAN,IAAoBN,EAAA,SAAAO,QAA6C,SAAAC,OAAAC,KAAAC,KAAUC,W,WFY5F,MAAME,EAASX,KAAKC,MAAMW,aAAaC,QAAQC,EAAAC,gBAAkB,GAyB1D,SAASC,EAAiBC,EAAO,IACtC,MAAMC,EAAOD,EACVE,KAAI,EAACC,SAAEA,EAAQC,cAAEA,EAAaC,QAAEA,KACxB,mEAC0BC,EAAAb,mBAA4BW,SAAqBD,gDACjDA,wGAEaE,6FACDA,0HAG1BC,EAAApB,6FAMpBqB,KAAK,IACRC,EAAAC,aAAaC,UAAYT,CAC3B,CAEA,SAASU,IACPH,EAAAC,aAAaC,UAAYE,EAAAC,oBAC3B,CAiCA,SAASC,IAEP,KADe/B,KAAKC,MAAMW,aAAaC,QAAQC,EAAAC,gBAAkB,IACrDiB,OAAQ,OAAOJ,GAC7B,CAnFAH,EAAAQ,cAAcC,iBAAiB,UAmE/B,SAAqBC,GACnBA,EAAEC,iBACF,MAAMC,EAAUF,EAAEG,cAAcC,OAAOC,MAAMC,OAC7C,IAAKJ,EAAS,OACd,MAAMK,EAAS/B,EAAOgC,QAAOC,GAC3BA,EAAGxB,SAASyB,cAAcC,SAAST,EAAQQ,iBAI7C,GAFApB,EAAAQ,cAAcc,SAETL,EAAOV,OAAQ,OAAQP,EAAAC,aAAaC,UAAYqB,EAAAC,SACrDjC,EAAiB0B,EACnB,IA7EAjB,EAAAC,aAAaQ,iBAAiB,SAW9BgB,eAA0Bf,GACxB,GAAyB,WAArBA,EAAEgB,OAAOC,QAAsB,OACnC,GAAIjB,EAAEgB,OAAOE,QAAQC,MAInB,OA+BJ,SAAyBC,GACvB,MAAMC,EAASxD,KAAKC,MAAMW,aAAaC,QAAQC,EAAAC,gBAAkB,GACjE,IAAK,IAAI0C,EAAI,EAAGA,EAAID,EAAOxB,OAAQyB,IACjC,GAAID,EAAOC,GAAGnC,UAAYiC,EAIxB,OAHAC,EAAOE,OAAOD,EAAG,GACjB7C,aAAa+C,QAAQ7C,EAAAC,aAAcf,KAAK4D,UAAUJ,SAClDzB,GAIN,CA5CI8B,CAAgB1B,EAAEgB,OAAOE,QAAQC,OACjCnB,EAAEgB,OAAOW,WAAWA,WAAWC,cA6C5B,WACL,MAAMC,EAAShE,KAAKC,MAAMW,aAAaC,QAAQC,EAAAC,gBAAkB,GACjE,IAAKiD,EAAOhC,OAAQ,OAAQP,EAAAC,aAAaC,UAAYE,EAAAC,sBACrD,EAAAmC,EAAAC,gBAAeF,EAAQhD,EACzB,CAhDImD,GAGEhC,EAAEgB,OAAOE,QAAQe,YACb,EAAAC,EAAAC,gBAAenC,EAAEgB,OAAOE,QAAQE,GAAIpB,EAAEgB,OAAOoB,mBACvD,KAnBA,EAAArE,EAAAsE,eACA,EAAAC,EAAAC,iBAEI/D,EAAOqB,QACT,EAAAiC,EAAAC,gBAAevD,EAAQK,GAEvBY","sources":["node_modules/@parcel/runtime-js/lib/runtime-e974d949e884b42f.js","src/js/components/favourites/index.js","node_modules/@parcel/runtime-js/lib/runtime-2b8e1dd7d7a9f09e.js","node_modules/@parcel/runtime-js/lib/runtime-ef840ac9c09fc7e5.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cm6eq\\\":\\\"f_coctail.5b1717f9.js\\\",\\\"7kCeP\\\":\\\"sprite.3f5ac9d6.svg\\\",\\\"jCTcp\\\":\\\"placeholder.7c12bf5f.gif\\\",\\\"aTofS\\\":\\\"f_ingredients.f9350511.js\\\",\\\"laXV3\\\":\\\"index.46e74318.js\\\"}\"));","import { headerInit } from '../header';\nimport { FAV_COCKTAIL } from './fav_cocktails';\nimport sprite from '../../../images/svg/sprite.svg';\nimport { notFound } from '../error';\nimport { themeSwitcher } from '../switcher/switcher';\nimport { searchCoctById } from '../modal';\nimport { errorListFavCocktail } from '../../templates';\nimport { initPagination } from '../pagination';\nimport { refFormSearch, refCocktList, refFormSearch } from '../refs';\nimport placeholder from '../../../images/placeholder.gif';\nimport 'lazysizes';\n\nconst actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\nrefFormSearch.addEventListener('submit', searchCockt);\nrefCocktList.addEventListener('click', deleteCard);\n\nheaderInit();\nthemeSwitcher();\n\nif (actArr.length) {\n  initPagination(actArr, renderMarkupList);\n} else {\n  renderErrorMarkup();\n}\n\nasync function deleteCard(e) {\n  if (e.target.tagName !== 'BUTTON') return;\n  if (e.target.dataset.favid) {\n    deleteFavFromLS(e.target.dataset.favid);\n    e.target.parentNode.parentNode.remove();\n    reRenderCards();\n    return;\n  }\n  if (e.target.dataset.type)\n    await searchCoctById(e.target.dataset.id, e.target.nextElementSibling);\n}\n\nexport function renderMarkupList(data = []) {\n  const mark = data\n    .map(({ strDrink, strDrinkThumb, idDrink }) => {\n      return `<li class=\"coctail-card\">\n      <img class=\"img lazyload\" src=\"${placeholder}\" data-srcset=${strDrinkThumb} alt=${strDrink}/img>\n      <h3 class=\"coctail-card__name\">${strDrink}</h3>\n      <div class=\"coctail-card__options\">\n        <button class=\"button-learn_more\" data-id=${idDrink} data-type=\"learn\">Learn more</button>\n        <button class=\"button-add_to\" data-favid=${idDrink} data-add=\"add\">\n          Remove\n          <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n            <use href=\"${sprite}#icon-heart_full\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>`;\n    })\n    .join('');\n  refCocktList.innerHTML = mark;\n}\n\nfunction renderErrorMarkup() {\n  refCocktList.innerHTML = errorListFavCocktail;\n}\n\nfunction deleteFavFromLS(id) {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  for (let i = 0; i < actArr.length; i++) {\n    if (actArr[i].idDrink === id) {\n      actArr.splice(i, 1);\n      localStorage.setItem(FAV_COCKTAIL, JSON.stringify(actArr));\n      checkAfterDelCockt();\n      return;\n    }\n  }\n}\n\nexport function reRenderCards() {\n  const newArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  if (!newArr.length) return (refCocktList.innerHTML = errorListFavCocktail);\n  initPagination(newArr, renderMarkupList);\n}\n\nfunction searchCockt(e) {\n  e.preventDefault();\n  const searchQ = e.currentTarget.finder.value.trim();\n  if (!searchQ) return;\n  const result = actArr.filter(el =>\n    el.strDrink.toLowerCase().includes(searchQ.toLowerCase())\n  );\n  refFormSearch.reset();\n\n  if (!result.length) return (refCocktList.innerHTML = notFound);\n  renderMarkupList(result);\n}\n\nfunction checkAfterDelCockt() {\n  const actArr = JSON.parse(localStorage.getItem(FAV_COCKTAIL)) || [];\n  if (!actArr.length) return renderErrorMarkup();\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7kCeP\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"jCTcp\")).toString();"],"names":["parcelRequire","register","JSON","parse","$alV1T","$84db521a7f184057$exports","URL","resolve","import","meta","url","toString","$865b6636986c9bf8$exports","$d090c5f393355eca$var$actArr","localStorage","getItem","$87vAp","FAV_COCKTAIL","$d090c5f393355eca$export$b7140f78c82be469","data","mark","map","strDrink","strDrinkThumb","idDrink","$parcel$interopDefault","join","$5zOW8","refCocktList","innerHTML","$d090c5f393355eca$var$renderErrorMarkup","$gSRkr","errorListFavCocktail","$d090c5f393355eca$var$checkAfterDelCockt","length","refFormSearch","addEventListener","e","preventDefault","searchQ","currentTarget","finder","value","trim","result","filter","el","toLowerCase","includes","reset","$gDQKf","notFound","async","target","tagName","dataset","favid","id","actArr","i","splice","setItem","stringify","$d090c5f393355eca$var$deleteFavFromLS","parentNode","remove","newArr","$goUyQ","initPagination","$d090c5f393355eca$export$2a733495a56f1588","type","$bNzKi","searchCoctById","nextElementSibling","headerInit","$lmZ5B","themeSwitcher"],"version":3,"file":"f_coctail.5b1717f9.js.map"}